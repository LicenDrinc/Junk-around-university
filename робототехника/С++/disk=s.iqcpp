{"mode":"Text","textContent":"#pragma region VEXcode Generated Robot Configuration\n// Make sure all required headers are included.\n#include <stdio.h>\n#include <stdlib.h>\n#include <stdbool.h>\n#include <math.h>\n#include <string.h>\n\n\n#include \"vex.h\"\n\nusing namespace vex;\n\n// Brain should be defined by default\nbrain Brain;\n\n\n// START IQ MACROS\n#define waitUntil(condition)                                                   \\\n  do {                                                                         \\\n    wait(5, msec);                                                             \\\n  } while (!(condition))\n\n#define repeat(iterations)                                                     \\\n  for (int iterator = 0; iterator < iterations; iterator++)\n// END IQ MACROS\n\n\n// Robot configuration code.\nmotor LeftDriveSmart = motor(PORT1, 1, false);\nmotor RightDriveSmart = motor(PORT6, 1, true);\ngyro DrivetrainGyro = gyro(PORT7, true);\nsmartdrive Drivetrain = smartdrive(LeftDriveSmart, RightDriveSmart, DrivetrainGyro, 200);\n\nmotor Motor4 = motor(PORT4, true);\nmotor Motor5 = motor(PORT5, false);\ntouchled TouchLED2 = touchled(PORT2);\n\nvoid calibrateDrivetrain() {\n  wait(200, msec);\n  Brain.Screen.print(\"Calibrating\");\n  Brain.Screen.newLine();\n  Brain.Screen.print(\"Gyro\");\n  DrivetrainGyro.calibrate();\n  while (DrivetrainGyro.isCalibrating()) {\n    wait(25, msec);\n  }\n\n  // Clears the screen and returns the cursor to row 1, column 1.\n  Brain.Screen.clearScreen();\n  Brain.Screen.setCursor(1, 1);\n}\n#pragma endregion VEXcode Generated Robot Configuration\n\n#include \"iq_cpp.h\"\n\nusing namespace vex;\n\nint DISK=0;\n\nvoid GyroPid(double speed=30,double distance=0.0, double head=180.0,double p=0.5,double i=0,double d=0) {\n  double curhead=0.0, prop=0.0, integral=0.0, diff=0.0, errold=0.0;\n  DrivetrainGyro.setTurnType(left);\n  LeftDriveSmart.setRotation(0,degrees);\n  RightDriveSmart.setRotation(0,degrees);\n  while( fabs(LeftDriveSmart.rotation(degrees)+RightDriveSmart.rotation(degrees)/2)< fabs(distance)){\n    curhead=DrivetrainGyro.heading();\n    prop = (curhead-head)*p;\n    integral = integral + (curhead-head)*i;\n    diff=(curhead-head-errold)*d;\n    errold = curhead-head;\n    if (distance<0){\n    LeftDriveSmart.spin(reverse,speed-(prop+integral+diff),percent);\n    RightDriveSmart.spin(reverse,speed+(prop+integral+diff),percent);\n    } else{\n    LeftDriveSmart.spin(forward,speed+(prop+integral+diff),percent);\n    RightDriveSmart.spin(forward,speed-(prop+integral+diff),percent);\n    } \n  }\n  Drivetrain.stop();\n}\n\n//32 little\n//22 big\n//25\n\nint main() {\n  double m5d=0.0;\n  int m5l=0 , m5b=0;\n  DrivetrainGyro.calibrate(calNormal);\n  DrivetrainGyro.setHeading(180,degrees);\n  Motor5.setTimeout(1,seconds);\n  Motor5.setStopping(hold);\n  Motor5.spinFor(reverse,100,degrees);\n  Motor5.spinFor(forward,60,degrees);\n  Motor5.stop();\n  Motor5.setPosition(0,degrees);\n  Motor4.setTimeout(3,seconds);\n  Motor4.setStopping(hold);\n  Motor4.spinFor(reverse,700,degrees);\n  Motor4.stop();\n  Motor4.setPosition(0,degrees);\n  while (DISK<5) {\n    TouchLED2.setBlink(green,0.25,0.25);\n    while(!TouchLED2.pressing()){\n      wait(2,msec);\n    }\n    while(TouchLED2.pressing()){\n      wait(2,msec);\n    }\n    TouchLED2.setBlink(colorType::none,0,0);\n    Drivetrain.setTurnVelocity(20,percent);\n    GyroPid(30,170,180,2,0.0005,3);\n    Motor5.spinFor(forward,90,degrees);\n    Brain.Screen.clearLine(1);\n    Brain.Screen.printAt(1,1,\"%f\",m5d=Motor5.position(degrees));\n    if (m5d>25) {\n      //littel\n      m5l++;\n      DISK++;\n      TouchLED2.setBlink(blue,0,0);\n      Motor4.spinFor(forward,550,degrees);\n      GyroPid(30,-260,180,2,0.0005,3);\n      Drivetrain.turnToHeading(270,degrees);\n      if(m5l==1){\n        GyroPid(30,210,270,2,0.0005,3);\n        Motor4.spinFor(reverse,550,degrees);\n        Motor5.spinFor(reverse,90,degrees);\n        GyroPid(30,-80,270,2,0.0005,3);\n      }else if(m5l==2){\n        GyroPid(30,190,270,2,0.0005,3);\n        Motor4.spinFor(reverse,400,degrees);\n        Motor5.spinFor(reverse,90,degrees);\n        GyroPid(30,-70,270,2,0.0005,3);\n      }else if(m5l==3){\n        GyroPid(30,170,270,2,0.0005,3);\n        Motor4.spinFor(reverse,250,degrees);\n        Motor5.spinFor(reverse,90,degrees);\n        GyroPid(30,-60,270,2,0.0005,3);\n      }else if(m5l==4){\n        GyroPid(30,150,270,2,0.0005,3);\n        Motor4.spinFor(reverse,100,degrees);\n        Motor5.spinFor(reverse,90,degrees);\n        GyroPid(30,-50,270,2,0.0005,3);\n      }\n      Drivetrain.turnToHeading(180,degrees);\n      Motor5.setTimeout(1,seconds);\n      Motor5.spinFor(forward,90,degrees);\n    }else{\n      //big\n      m5b++;\n      DISK++;\n      TouchLED2.setBlink(red,0,0);\n      Motor4.spinFor(forward,550,degrees);\n      GyroPid(30,-260,180,2,0.0005,3);\n      Drivetrain.turnToHeading(90,degrees);\n      if(m5b==1){\n        GyroPid(30,210,90,2,0.0005,3);\n        Motor4.spinFor(reverse,550,degrees);\n        Motor5.spinFor(reverse,90,degrees);\n        GyroPid(30,-80,90,2,0.0005,3);\n      }else if(m5b==2){\n        GyroPid(30,190,90,2,0.0005,3);\n        Motor4.spinFor(reverse,400,degrees);\n        Motor5.spinFor(reverse,90,degrees);\n        GyroPid(30,-70,90,2,0.0005,3);\n      }else if(m5b==3){\n        GyroPid(30,170,90,2,0.0005,3);\n        Motor4.spinFor(reverse,250,degrees);\n        Motor5.spinFor(reverse,90,degrees);\n        GyroPid(30,-60,90,2,0.0005,3);\n      }else if(m5b==4){\n        GyroPid(30,150,90,2,0.0005,3);\n        Motor4.spinFor(reverse,100,degrees);\n        Motor5.spinFor(reverse,90,degrees);\n        GyroPid(30,-50,90,2,0.0005,3);\n      }\n      Drivetrain.turnToHeading(180,degrees);\n      Motor5.setTimeout(1,seconds);\n      Motor5.spinFor(forward,90,degrees);\n    }\n    Motor4.spinToPosition(0,degrees);\n    Motor5.spinToPosition(0,degrees);\n  }\n}","textLanguage":"cpp","rconfig":[{"port":[1,6,7],"name":"Drivetrain","customName":false,"deviceType":"Drivetrain","deviceClass":"smartdrive","setting":{"type":"2-motor","wheelSize":"200mm","gearRatio":"1:1","direction":"fwd","gyroType":"smart","width":"173","unit":"mm","wheelbase":"76","wheelbaseUnit":"mm","xOffset":"0","yOffset":"0","thetaOffset":"0"},"triportSourcePort":22},{"port":[4],"name":"Motor4","customName":false,"deviceType":"Motor","deviceClass":"motor","setting":{"reversed":"true","fwd":"вперёд","rev":"обратно"},"triportSourcePort":22},{"port":[5],"name":"Motor5","customName":false,"deviceType":"Motor","deviceClass":"motor","setting":{"reversed":"false","fwd":"вперёд","rev":"обратно"},"triportSourcePort":22},{"port":[2],"name":"TouchLED2","customName":false,"deviceType":"TouchLED","deviceClass":"touchled","setting":{},"triportSourcePort":22}],"slot":0,"platform":"IQ","sdkVersion":"20210916.19.00.00","appVersion":"2.2.2","fileFormat":"1.0.1","icon":"","targetBrainGen":"First","target":"Physical"}